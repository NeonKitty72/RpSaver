<!--*************************************************************
	Suzanne Kersten
	3/28/2017
	RP-Saver: Saves all your rp's in an easy-to-read format!
	Version 0.1
	
	CHANGELIST: 
		Added in ability to save files as a html file
	
	TOADD:Actual good formatting? It works 4 now tho
	Idea: Make structure of first specieal character, make a 
		struct that tells where it is and what fun to do?
		Then push that and use the beginning of special char
		to put it all into the Done Output
*************************************************************-->
<!DOCTYPE html>
<html lang="en">

<head>
	<title>RP Saver</title>
	<meta charset="UTF-8">
	
	<!--***********************************************************************************************************************************
		JAVASCRIPT CODE
	************************************************************************************************************************************-->
	<script>
		function makeItNoice(){			
			var allText = document.getElementById("rp").value;		//Text that is in the user input textArea
			var toOutput = "";										//Wat to add to the current output-chat box
			

			//GOOD code for making things into chatboxes
			document.getElementById("shitToWrite").innerHTML = "";
			var left = 1;
			for (var i = 0; i < allText.length; i++){
				//pick up text until we hit crlf
				if (allText.charAt(i) != "\r" && allText.charAt(i) != "\n")
					toOutput += allText.charAt(i)
				
				//output text, reset vars for next output
				if (allText.charAt(i) == "\n"){					
					//set up text to display
					var text = 	document.createElement("p");
					if (left) 	text.setAttribute("class", "leftRP");
					else 		text.setAttribute("class", "rightRP");
					
					var t = document.createTextNode(toOutput);
					text.appendChild(t);					
					document.getElementById("shitToWrite").appendChild(text);
					
					
					toOutput = "";
					left = (left + 1) % 2;
				}
				
			}
			//one last output to grab the last response
			var text = 	document.createElement("p");
			if (left) 	text.setAttribute("class", "leftRP");
			else 		text.setAttribute("class", "rightRP");
			var t = document.createTextNode(toOutput);
			text.appendChild(t);					
			document.getElementById("shitToWrite").appendChild(text);
			
			activateSaveButton();
	
		}	
		
		
		/*
			Make Whatever is stored in shitToWrite available to be saved.
			Basically just sets href attribute to the text data, sets up
			a filename, and puts some text in a previously hidden <a> tag.
		*/
		function activateSaveButton(){
			var text = document.getElementById("shitToWrite").innerHTML;
			var saveBtn = document.getElementById("saveBtn");
			saveBtn.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
			saveBtn.setAttribute('download', "RP.html");
			saveBtn.innerHTML = "Save this as a web page file";
		}
	
	</script>
	
	<!--***********************************************************************************************************************************
		CSS CODE
	************************************************************************************************************************************-->
	<style>
		#shitToWrite {
			width: 800px;
			margin: auto;
		}
	
		.leftRP {
			max-width: 75%;
			min-width: 40%;
			background-color: #E9E8F1;
			font-size: 14px;
			font-color: #25201C;
			font-family: Verdana, sans-serif;
			padding: 10px;
			margin: 0px;
			margin-bottom: 4px;
			border-radius: 10px;
			float: left;
		}
		
		.rightRP {
			max-width: 75%;
			min-width: 40%;
			background-color: #DCF2D4;
			font-size: 14px;
			font-color: #25201C;
			font-family: Verdana, sans-serif;
			padding: 10px;
			margin: 0px;
			margin-bottom: 4px;
			border-radius: 10px;
			float: right;
		}
	
	
	
	</style>
</head>

	<!--***********************************************************************************************************************************
		HTML CODE
	************************************************************************************************************************************-->
<body>
	<!-- Where user inputs text -->
	<textarea rows="10" cols="50" name="rp" id="rp">[TheFiendHerself]: lol oh no look I'm a shitty mockup! *eats u* nomph nomph cronch cronch on the kitty who is pretty and skitty and this is a long paragraph that I'm just trying to make really long so I can have multiple liiiiines Tails is cute and I need oone more line there we go
[Other Person]: lol oh no look I'm a shitty mockup! *eats u* nomph
[TheFiendHerself]: lol oh no look I'm a shitty mockup! *eats u* nomph</textarea> 
	
	<!-- Input buttons. Save button is nothing to start because we can't save what user didn't 'compile' -->
	<br />
	<input type="submit" value="Make this look nice!" onclick="makeItNoice()" style="margin-bottom: 10px">
	<a id="saveBtn"></a>
	<br />
	<div id="shitToWrite">
		<!-- Where the rp text will go -->
	</div>
</body>
</html>